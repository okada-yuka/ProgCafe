{"remainingRequest":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/babel-loader/lib/index.js!/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/ts-loader/index.js??ref--14-2!/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/yokada/M1/ProgCafe/prog-cafe-front/src/utils/store.ts","dependencies":[{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/src/utils/store.ts","mtime":1600820798372},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMveW9rYWRhL00xL1Byb2dDYWZlL3Byb2ctY2FmZS1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95b2thZGEvTTEvUHJvZ0NhZmUvcHJvZy1jYWZlLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMveW9rYWRhL00xL1Byb2dDYWZlL3Byb2ctY2FmZS1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy95b2thZGEvTTEvUHJvZ0NhZmUvcHJvZy1jYWZlLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lva2FkYS9NMS9Qcm9nQ2FmZS9wcm9nLWNhZmUtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3lva2FkYS9NMS9Qcm9nQ2FmZS9wcm9nLWNhZmUtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGlzRGV2ZWxvcG1lbnQgfSBmcm9tICdAL3V0aWxzL2NvbnN0YW50cyc7CmltcG9ydCB7IGdldEF2YXRhckljb25VcmwsIGdldEdyb3VwQ2hhdElkIH0gZnJvbSAnLi91dGlscyc7CmltcG9ydCB7IGlzTm90aWZpYWJsZSB9IGZyb20gJy4vbm90aWZpY2F0aW9uJzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJy4vd2VicnRjJzsgLy8gd3MgZXZlbnQgaGFuZGxlcnMKCnZhciB3c09uT3BlbiA9IGZ1bmN0aW9uIHdzT25PcGVuKHN0cikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICBjb25zb2xlLmxvZygnd3Mgb3BlbicpOwogICAgc3RyLndzU2VuZCh7CiAgICAgIHR5cGU6ICdlbnRlcicsCiAgICAgIGlkOiBzdHIuZ2l0aHViSWQsCiAgICAgIHJvb21pZDogc3RyLnJvb21JZAogICAgfSk7CiAgfTsKfTsKCnZhciB3c09uQ2xvc2UgPSBmdW5jdGlvbiB3c09uQ2xvc2UoKSB7CiAgcmV0dXJuIGNvbnNvbGUubG9nKCd3cyBjbG9zZScpOwp9OwoKdmFyIHdzT25FcnJvciA9IGZ1bmN0aW9uIHdzT25FcnJvcihlcnIpIHsKICByZXR1cm4gY29uc29sZS5lcnJvcignd3MgZXJyb3InLCBlcnIpOwp9OwoKdmFyIHdzT25NZXNzYWdlID0gZnVuY3Rpb24gd3NPbk1lc3NhZ2Uoc3RyKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICB2YXIgX2hpc3RvcmllcyRqc29uJGZyb20sIF9zdHIkY2FsbENvbm47CgogICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi8KICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpOwogICAgY29uc29sZS5sb2coJ3dzIG1lc3NhZ2UnLCBqc29uLnR5cGUsIGpzb24pOwogICAgdmFyIGhpc3RvcmllcyA9IHN0ci5jaGF0SGlzdG9yaWVzOwoKICAgIHN3aXRjaCAoanNvbi50eXBlKSB7CiAgICAgIGNhc2UgJ25ld3VzZXInOgogICAgICAgIGlmIChqc29uLmlkID09PSBzdHIuZ2l0aHViSWQpIGJyZWFrOwogICAgICAgIHN0ci51c2Vycy5wdXNoKGpzb24uaWQpOwogICAgICAgIHN0ci5jaGF0SGlzdG9yaWVzW2pzb24uaWRdID0gW107CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzdGF0dXMnOgogICAgICAgIHN0ci51c2VyU3RhdHVzW2pzb24uaWRdID0ganNvbi52YWx1ZTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3Byb2dyZXNzJzoKICAgICAgICBzdHIucHJvZ3Jlc3NbanNvbi5pZF0gPSBqc29uLnZhbHVlOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZ19tZXNzYWdlJzoKICAgICAgICB7CiAgICAgICAgICB2YXIgX2hpc3RvcmllcyRjaGF0SWQ7CgogICAgICAgICAgaWYgKGpzb24uaWQgPT09IHN0ci5naXRodWJJZCkgYnJlYWs7CiAgICAgICAgICB2YXIgY2hhdElkID0gZ2V0R3JvdXBDaGF0SWQoanNvbi5yb29taWQgfHwgJycpOwogICAgICAgICAgKF9oaXN0b3JpZXMkY2hhdElkID0gaGlzdG9yaWVzW2NoYXRJZF0pID09PSBudWxsIHx8IF9oaXN0b3JpZXMkY2hhdElkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaGlzdG9yaWVzJGNoYXRJZC5wdXNoKHsKICAgICAgICAgICAgZnJvbToganNvbi5pZCwKICAgICAgICAgICAgbWVzc2FnZToganNvbi52YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBzdHIuY2hhdEhpc3RvcmllcyA9IF9vYmplY3RTcHJlYWQoe30sIGhpc3Rvcmllcyk7CiAgICAgICAgICBpc05vdGlmaWFibGUudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBub3RpZiA9IG5ldyBOb3RpZmljYXRpb24oJ0dyb3VwIGNoYXQnLCB7CiAgICAgICAgICAgICAgaWNvbjogZ2V0QXZhdGFySWNvblVybChqc29uLmlkKSwKICAgICAgICAgICAgICBib2R5OiBqc29uLnZhbHVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBub3RpZi5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGNvbnNvbGUuZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnaV9tZXNzYWdlJzoKICAgICAgICBpZiAoIWhpc3Rvcmllc1tqc29uLmZyb21dKSBoaXN0b3JpZXNbanNvbi5mcm9tXSA9IFtdOwogICAgICAgIChfaGlzdG9yaWVzJGpzb24kZnJvbSA9IGhpc3Rvcmllc1tqc29uLmZyb21dKSA9PT0gbnVsbCB8fCBfaGlzdG9yaWVzJGpzb24kZnJvbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2hpc3RvcmllcyRqc29uJGZyb20ucHVzaCh7CiAgICAgICAgICBmcm9tOiBqc29uLmZyb20sCiAgICAgICAgICBtZXNzYWdlOiBqc29uLnZhbHVlCiAgICAgICAgfSk7CiAgICAgICAgc3RyLmNoYXRIaXN0b3JpZXMgPSBfb2JqZWN0U3ByZWFkKHt9LCBoaXN0b3JpZXMpOwogICAgICAgIGlzTm90aWZpYWJsZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBub3RpZiA9IG5ldyBOb3RpZmljYXRpb24oanNvbi5mcm9tLCB7CiAgICAgICAgICAgIGljb246IGdldEF2YXRhckljb25VcmwoanNvbi5mcm9tKSwKICAgICAgICAgICAgYm9keToganNvbi52YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBub3RpZi5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGNvbnNvbGUuZXJyb3IpOwogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnY2FsbF9zdGFydCc6CiAgICAgICAgaWYgKHN0ci5jYWxsSWQpIGJyZWFrOwogICAgICAgIHN0ci5jYWxsSWQgPSBqc29uLnZhbHVlOwoKICAgICAgICBpZiAoc3RyLmNhbGxTdGF0dXMgPT09ICdub25lJykgewogICAgICAgICAgc3RyLmNhbGxUYXJnZXQgPSBqc29uLmZyb207CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0ci5jYWxsVGFyZ2V0ID0ganNvbi50bzsKICAgICAgICAgIHN0ci5jYWxsU3RhcnQoKTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnY2FsbF9kZW55JzoKICAgICAgY2FzZSAnY2FsbF9lbmQnOgogICAgICAgIHN0ci5jYWxsSWQgPSBudWxsOwogICAgICAgIHN0ci5jYWxsVGFyZ2V0ID0gbnVsbDsKICAgICAgICBzdHIuY2FsbFN0YXR1cyA9ICdub25lJzsKICAgICAgICAoX3N0ciRjYWxsQ29ubiA9IHN0ci5jYWxsQ29ubikgPT09IG51bGwgfHwgX3N0ciRjYWxsQ29ubiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0ciRjYWxsQ29ubi5kaXNjb25uZWN0KCk7CiAgICAgICAgc3RyLmNhbGxDb25uID0gbnVsbDsKICAgICAgICBzdHIucGFydG5lclN0cmVhbSA9IG51bGw7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdsZWF2ZSc6CiAgICAgICAgaWYgKHN0ci51c2Vycy5pbmNsdWRlcyhqc29uLmlkKSkgewogICAgICAgICAgc3RyLnVzZXJzID0gc3RyLnVzZXJzLmZpbHRlcihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICByZXR1cm4gdXNlciAhPT0ganNvbi5pZDsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgfQogICAgLyogZXNsaW50LWVuYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqLwoKICB9Owp9OwoKZXhwb3J0IHZhciBTdG9yZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RvcmUoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvcmUpOwoKICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgdGhpcy53cyA9IG51bGw7CiAgICB0aGlzLmNhbGxTdGF0dXMgPSAnbm9uZSc7CiAgICB0aGlzLmNhbGxUYXJnZXQgPSBudWxsOwogICAgdGhpcy5jYWxsSWQgPSBudWxsOwogICAgdGhpcy5jYWxsQ29ubiA9IG51bGw7CiAgICB0aGlzLnBhcnRuZXJTdHJlYW0gPSBudWxsOwogICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBudWxsOwogICAgdGhpcy5yb29tSWQgPSBudWxsOwogICAgdGhpcy5hY3RpdmVUaW1lID0gMDsKICAgIHRoaXMuc3RvcHBpbmcgPSB0cnVlOwogICAgdGhpcy5zdGF0dXMgPSAnV29ya2luZyc7CiAgICB0aGlzLnVzZXJzID0gWydzc3Nzb3RhJywgJ0tlbnlhU3VnaW1vdG8nLCAnb2thZGEteXVrYScsICd3YWt1ZGFyJywgJ2dvaml0ZWppJywgJ3MtaGlqaXJpMDMxMSddOwogICAgdGhpcy5naXRodWJJZCA9IG51bGw7CiAgICB0aGlzLnNlYXJjaFJlc3VsdHMgPSBudWxsOwogICAgdGhpcy5wcm9ncmVzcyA9IHt9OwogICAgdGhpcy51c2VyU3RhdHVzID0ge307CiAgICB0aGlzLmNoYXRIaXN0b3JpZXMgPSB7CiAgICAgIF9ncm91cF86IFt7CiAgICAgICAgZnJvbTogJ3Nzc3NvdGEnLAogICAgICAgIG1lc3NhZ2U6ICdIaScKICAgICAgfSwgewogICAgICAgIGZyb206ICdrZW55YVN1Z2ltb3RvJywKICAgICAgICBtZXNzYWdlOiAnSGkgc290YScKICAgICAgfSwgewogICAgICAgIGZyb206ICd3YWt1ZGFyJywKICAgICAgICBtZXNzYWdlOiAn5pel5pys6Kqe5ZaL44KJ44Gq44GE44Gu77yfJwogICAgICB9XQogICAgfTsKICB9CgogIF9jcmVhdGVDbGFzcyhTdG9yZSwgW3sKICAgIGtleTogImVudGVyUm9vbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXJSb29tKGlkLCB1c2VycykgewogICAgICB0aGlzLnJvb21JZCA9IGlkOwogICAgICB0aGlzLnVzZXJzID0gdXNlcnM7CiAgICAgIHRoaXMuaW5pdENoYXRIaXN0b3JpZXMoaWQsIHVzZXJzKTsKICAgICAgdGhpcy5pbml0V2ViU29ja2V0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5pdENoYXRIaXN0b3JpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRDaGF0SGlzdG9yaWVzKGlkLCB1c2VycykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgW2dldEdyb3VwQ2hhdElkKGlkKV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh1c2VycykpLmZvckVhY2goZnVuY3Rpb24gKGNoYXRJZCkgewogICAgICAgIGlmIChfdGhpcy5jaGF0SGlzdG9yaWVzW2NoYXRJZF0gPT0gbnVsbCkgewogICAgICAgICAgX3RoaXMuY2hhdEhpc3Rvcmllc1tjaGF0SWRdID0gW107CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0V2ViU29ja2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0V2ViU29ja2V0KCkgewogICAgICB0aGlzLndzID0gbmV3IFdlYlNvY2tldChpc0RldmVsb3BtZW50ID8gJ3dzczovL3Byb2ctY2FmZS5oZXJva3VhcHAuY29tL3dzJyA6ICd3c3M6Ly9vYnNjdXJlLXJpZGdlLTU3MjU2Lmhlcm9rdWFwcC5jb20vd3MnKTsKICAgICAgdGhpcy53cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgd3NPbk9wZW4odGhpcykpOwogICAgICB0aGlzLndzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgd3NPbkNsb3NlKTsKICAgICAgdGhpcy53cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHdzT25FcnJvcik7CiAgICAgIHRoaXMud3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHdzT25NZXNzYWdlKHRoaXMpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleGl0Um9vbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhpdFJvb20oKSB7CiAgICAgIHZhciBfdGhpcyR3czsKCiAgICAgIHRoaXMucm9vbUlkID0gbnVsbDsKICAgICAgKF90aGlzJHdzID0gdGhpcy53cykgPT09IG51bGwgfHwgX3RoaXMkd3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdzLmNsb3NlKCk7CiAgICAgIHRoaXMud3MgPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogIndzU2VuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd3NTZW5kKGJvZHkpIHsKICAgICAgdmFyIF90aGlzJHdzMiwgX3RoaXMkd3MzOwoKICAgICAgaWYgKCgoX3RoaXMkd3MyID0gdGhpcy53cykgPT09IG51bGwgfHwgX3RoaXMkd3MyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR3czIucmVhZHlTdGF0ZSkgIT09IFdlYlNvY2tldC5PUEVOKSByZXR1cm47CiAgICAgIChfdGhpcyR3czMgPSB0aGlzLndzKSA9PT0gbnVsbCB8fCBfdGhpcyR3czMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdzMy5zZW5kKEpTT04uc3RyaW5naWZ5KGJvZHkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kTWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoY2hhdElkLCBjb250ZW50KSB7CiAgICAgIHZhciBfaGlzdG9yaWVzJGNoYXRJZDI7CgogICAgICBpZiAoIXRoaXMuZ2l0aHViSWQpIHJldHVybjsKICAgICAgdmFyIGlzR3JvdXAgPSBjaGF0SWQubWF0Y2goL19ncm91cF8oWzAtOWEtel0rKS9pKTsKICAgICAgdmFyIGhpc3RvcmllcyA9IHRoaXMuY2hhdEhpc3RvcmllczsKICAgICAgaWYgKCFoaXN0b3JpZXNbY2hhdElkXSkgaGlzdG9yaWVzW2NoYXRJZF0gPSBbXTsKICAgICAgKF9oaXN0b3JpZXMkY2hhdElkMiA9IGhpc3Rvcmllc1tjaGF0SWRdKSA9PT0gbnVsbCB8fCBfaGlzdG9yaWVzJGNoYXRJZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oaXN0b3JpZXMkY2hhdElkMi5wdXNoKHsKICAgICAgICBmcm9tOiB0aGlzLmdpdGh1YklkLAogICAgICAgIG1lc3NhZ2U6IGNvbnRlbnQKICAgICAgfSk7CiAgICAgIHRoaXMuY2hhdEhpc3RvcmllcyA9IF9vYmplY3RTcHJlYWQoe30sIGhpc3Rvcmllcyk7CiAgICAgIHRoaXMud3NTZW5kKHsKICAgICAgICB0eXBlOiBpc0dyb3VwID8gJ2dfbWVzc2FnZScgOiAnaV9tZXNzYWdlJywKICAgICAgICB2YWx1ZTogY29udGVudCwKICAgICAgICBpZDogaXNHcm91cCA/IHRoaXMuZ2l0aHViSWQgOiB1bmRlZmluZWQsCiAgICAgICAgcm9vbWlkOiBpc0dyb3VwID8gaXNHcm91cFsxXSA6IHVuZGVmaW5lZCwKICAgICAgICBmcm9tOiAhaXNHcm91cCA/IHRoaXMuZ2l0aHViSWQgOiB1bmRlZmluZWQsCiAgICAgICAgdG86ICFpc0dyb3VwID8gY2hhdElkIDogdW5kZWZpbmVkCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbmRQcm9ncmVzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZFByb2dyZXNzKCkgewogICAgICBpZiAoIXRoaXMuZ2l0aHViSWQpIHJldHVybjsKICAgICAgdGhpcy53c1NlbmQoewogICAgICAgIHR5cGU6ICdwcm9ncmVzcycsCiAgICAgICAgdmFsdWU6IHRoaXMuYWN0aXZlVGltZSwKICAgICAgICBpZDogdGhpcy5naXRodWJJZCwKICAgICAgICByb29taWQ6IHRoaXMucm9vbUlkCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbmRTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRTdGF0dXMoc3RhdHVzKSB7CiAgICAgIGlmICghdGhpcy5naXRodWJJZCkgcmV0dXJuOwogICAgICB0aGlzLndzU2VuZCh7CiAgICAgICAgdHlwZTogJ3N0YXR1cycsCiAgICAgICAgdmFsdWU6IHN0YXR1cywKICAgICAgICBpZDogdGhpcy5naXRodWJJZCwKICAgICAgICByb29taWQ6IHRoaXMucm9vbUlkCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNhbGxSZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxsUmVxdWVzdCh0YXJnZXQpIHsKICAgICAgaWYgKCF0aGlzLmdpdGh1YklkKSByZXR1cm47CiAgICAgIHRoaXMuY2FsbFN0YXR1cyA9ICdjYWxsaW5nJzsKICAgICAgdGhpcy53c1NlbmQoewogICAgICAgIHR5cGU6ICdjYWxsX3JlcXVlc3QnLAogICAgICAgIGZyb206IHRoaXMuZ2l0aHViSWQsCiAgICAgICAgdG86IHRhcmdldAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYWxsRGVueSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FsbERlbnkoKSB7CiAgICAgIHZhciBfdGhpcyRjYWxsQ29ubjsKCiAgICAgIGlmICghdGhpcy5naXRodWJJZCB8fCAhdGhpcy5jYWxsVGFyZ2V0KSByZXR1cm47CiAgICAgIHRoaXMud3NTZW5kKHsKICAgICAgICB0eXBlOiAnY2FsbF9kZW55JywKICAgICAgICBmcm9tOiB0aGlzLmdpdGh1YklkLAogICAgICAgIHRvOiB0aGlzLmNhbGxUYXJnZXQKICAgICAgfSk7CiAgICAgIHRoaXMuY2FsbElkID0gbnVsbDsKICAgICAgdGhpcy5jYWxsVGFyZ2V0ID0gbnVsbDsKICAgICAgdGhpcy5jYWxsU3RhdHVzID0gJ25vbmUnOwogICAgICAoX3RoaXMkY2FsbENvbm4gPSB0aGlzLmNhbGxDb25uKSA9PT0gbnVsbCB8fCBfdGhpcyRjYWxsQ29ubiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY2FsbENvbm4uZGlzY29ubmVjdCgpOwogICAgICB0aGlzLmNhbGxDb25uID0gbnVsbDsKICAgICAgdGhpcy5wYXJ0bmVyU3RyZWFtID0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYWxsU3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jYWxsU3RhcnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbGxJZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYWxsIGlkJywgdGhpcy5jYWxsSWQpOwogICAgICAgICAgICAgICAgdGhpcy5jYWxsU3RhdHVzID0gJ2NhbGxpbmcnOwogICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoewogICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxmIHN0cmVhbScsIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5jYWxsQ29ubiA9IGNvbm5lY3QoX3RoaXMyLmNhbGxJZCwgc3RyZWFtKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi5jYWxsQ29ubi5vbignYWRkc3RyZWFtJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RyZWFtIGFkZGVkJywgZSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfZSRzdHJlYW1zID0gX3NsaWNlZFRvQXJyYXkoZS5zdHJlYW1zLCAxKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnBhcnRuZXJTdHJlYW0gPSBfZSRzdHJlYW1zWzBdOwogICAgICAgICAgICAgICAgICAgIF90aGlzMi5hdWRpb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpOwogICAgICAgICAgICAgICAgICAgIF90aGlzMi5hdWRpb0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgICAgICAgICAgICAgIF90aGlzMi5hdWRpb0VsZW1lbnQuc3R5bGUuYm90dG9tID0gJzAnOwogICAgICAgICAgICAgICAgICAgIF90aGlzMi5hdWRpb0VsZW1lbnQuc3R5bGUubGVmdCA9ICcwJzsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuYXVkaW9FbGVtZW50LmNvbnRyb2xzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9lJHN0cmVhbXMyID0gX3NsaWNlZFRvQXJyYXkoZS5zdHJlYW1zLCAxKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBfZSRzdHJlYW1zMlswXTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKF90aGlzMi5hdWRpb0VsZW1lbnQpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY2FsbFN0YXJ0KCkgewogICAgICAgIHJldHVybiBfY2FsbFN0YXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjYWxsU3RhcnQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjYWxsRW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxsRW5kKCkgewogICAgICB2YXIgX3RoaXMkY2FsbENvbm4yOwoKICAgICAgaWYgKCF0aGlzLmdpdGh1YklkIHx8ICF0aGlzLmNhbGxUYXJnZXQpIHJldHVybjsKICAgICAgdGhpcy53c1NlbmQoewogICAgICAgIHR5cGU6ICdjYWxsX2VuZCcsCiAgICAgICAgZnJvbTogdGhpcy5naXRodWJJZCwKICAgICAgICB0bzogdGhpcy5jYWxsVGFyZ2V0CiAgICAgIH0pOwogICAgICB0aGlzLmNhbGxJZCA9IG51bGw7CiAgICAgIHRoaXMuY2FsbFRhcmdldCA9IG51bGw7CiAgICAgIHRoaXMuY2FsbFN0YXR1cyA9ICdub25lJzsKICAgICAgKF90aGlzJGNhbGxDb25uMiA9IHRoaXMuY2FsbENvbm4pID09PSBudWxsIHx8IF90aGlzJGNhbGxDb25uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY2FsbENvbm4yLmRpc2Nvbm5lY3QoKTsKICAgICAgdGhpcy5jYWxsQ29ubiA9IG51bGw7CiAgICAgIHRoaXMucGFydG5lclN0cmVhbSA9IG51bGw7CiAgICAgIGlmICh0aGlzLmF1ZGlvRWxlbWVudCkgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmF1ZGlvRWxlbWVudCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU3RvcmU7Cn0oKTsKZXhwb3J0IHZhciBzdG9yZSA9IFZ1ZS5vYnNlcnZhYmxlKG5ldyBTdG9yZSgpKTs="},{"version":3,"sources":["/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/yokada/M1/ProgCafe/prog-cafe-front/src/utils/store.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport { isDevelopment } from '@/utils/constants';\nimport Connection from '@open-ayame/ayame-web-sdk/src/connection/index';\nimport { getAvatarIconUrl, getGroupChatId } from './utils';\nimport { isNotifiable } from './notification';\nimport { connect } from './webrtc';\n\n// ws event handlers\nconst wsOnOpen = (str: Store) => () => {\n  console.log('ws open');\n  str.wsSend({\n    type: 'enter',\n    id: str.githubId,\n    roomid: str.roomId,\n  });\n};\nconst wsOnClose = () => console.log('ws close');\nconst wsOnError = (err: Event) => console.error('ws error', err);\nconst wsOnMessage = (str: Store) => (message: MessageEvent) => {\n  /* eslint-disable no-param-reassign */\n  const json = JSON.parse(message.data);\n  console.log('ws message', json.type, json);\n  const histories = str.chatHistories;\n\n  switch (json.type) {\n    case 'newuser':\n      if (json.id === str.githubId) break;\n      str.users.push(json.id);\n      str.chatHistories[json.id] = [];\n      break;\n    case 'status':\n      str.userStatus[json.id] = json.value;\n      break;\n    case 'progress':\n      str.progress[json.id] = json.value;\n      break;\n    case 'g_message': {\n      if (json.id === str.githubId) break;\n      const chatId = getGroupChatId(json.roomid || '');\n      histories[chatId]?.push({\n        from: json.id,\n        message: json.value,\n      });\n      str.chatHistories = { ...histories };\n\n      isNotifiable.then(() => {\n        const notif = new Notification('Group chat', {\n          icon: getAvatarIconUrl(json.id),\n          body: json.value,\n        });\n        notif.addEventListener('error', console.error);\n      });\n    }\n      break;\n    case 'i_message':\n      if (!histories[json.from]) histories[json.from] = [];\n      histories[json.from]?.push({\n        from: json.from,\n        message: json.value,\n      });\n      str.chatHistories = { ...histories };\n\n      isNotifiable.then(() => {\n        const notif = new Notification(json.from, {\n          icon: getAvatarIconUrl(json.from),\n          body: json.value,\n        });\n        notif.addEventListener('error', console.error);\n      });\n      break;\n    case 'call_start':\n      if (str.callId) break;\n      str.callId = json.value;\n      if (str.callStatus === 'none') {\n        str.callTarget = json.from;\n      } else {\n        str.callTarget = json.to;\n        str.callStart();\n      }\n      break;\n    case 'call_deny':\n    case 'call_end':\n      str.callId = null;\n      str.callTarget = null;\n      str.callStatus = 'none';\n      str.callConn?.disconnect();\n      str.callConn = null;\n      str.partnerStream = null;\n      break;\n    case 'leave':\n      if (str.users.includes(json.id)) {\n        str.users = str.users.filter((user) => user !== json.id);\n      }\n      break;\n    default:\n  }\n  /* eslint-enable no-param-reassign */\n};\n\nexport class Store {\n  loading = false\n  ws: WebSocket | null = null\n  callStatus: CallStatus = 'none'\n  callTarget: string | null = null\n  callId: string | null = null\n  callConn: Connection | null = null\n  partnerStream: MediaStream | null = null\n  audioElement: HTMLAudioElement | null = null\n  roomId: string | null = null\n  activeTime = 0\n  stopping = true\n  status: Status = 'Working'\n  users: string[] = ['ssssota', 'KenyaSugimoto', 'okada-yuka', 'wakudar', 'gojiteji', 's-hijiri0311']\n  githubId: string | null = null\n  searchResults: SearchResult | null = null\n  progress: Record<string, number> = {}\n  userStatus: Record<string, string> = {}\n  chatHistories: ChatHistories = {\n    _group_: [ // eslint-disable-line @typescript-eslint/camelcase\n      { from: 'ssssota', message: 'Hi' },\n      { from: 'kenyaSugimoto', message: 'Hi sota' },\n      { from: 'wakudar', message: '日本語喋らないの？' },\n    ],\n  }\n\n  enterRoom(id: string, users: string[]): void {\n    this.roomId = id;\n    this.users = users;\n    this.initChatHistories(id, users);\n    this.initWebSocket();\n  }\n\n  initChatHistories(id: string, users: string[]): void {\n    [getGroupChatId(id), ...users].forEach((chatId) => {\n      if (this.chatHistories[chatId] == null) {\n        this.chatHistories[chatId] = [];\n      }\n    });\n  }\n\n  initWebSocket() {\n    this.ws = new WebSocket(\n      isDevelopment\n        ? 'wss://prog-cafe.herokuapp.com/ws'\n        : 'wss://obscure-ridge-57256.herokuapp.com/ws',\n    );\n    this.ws.addEventListener('open', wsOnOpen(this));\n    this.ws.addEventListener('close', wsOnClose);\n    this.ws.addEventListener('error', wsOnError);\n    this.ws.addEventListener('message', wsOnMessage(this));\n  }\n\n  exitRoom(): void {\n    this.roomId = null;\n    this.ws?.close();\n    this.ws = null;\n  }\n\n  wsSend(body: Record<string, unknown>) {\n    if (this.ws?.readyState !== WebSocket.OPEN) return;\n    this.ws?.send(JSON.stringify(body));\n  }\n\n  sendMessage(chatId: string, content: string) {\n    if (!this.githubId) return;\n    const isGroup = chatId.match(/_group_([0-9a-z]+)/i);\n    const histories = this.chatHistories;\n    if (!histories[chatId]) histories[chatId] = [];\n    histories[chatId]?.push({\n      from: this.githubId,\n      message: content,\n    });\n    this.chatHistories = { ...histories };\n    this.wsSend({\n      type: isGroup ? 'g_message' : 'i_message',\n      value: content,\n      id: isGroup ? this.githubId : undefined,\n      roomid: isGroup ? isGroup[1] : undefined,\n      from: !isGroup ? this.githubId : undefined,\n      to: !isGroup ? chatId : undefined,\n    });\n  }\n\n  sendProgress() {\n    if (!this.githubId) return;\n    this.wsSend({\n      type: 'progress',\n      value: this.activeTime,\n      id: this.githubId,\n      roomid: this.roomId,\n    });\n  }\n\n  sendStatus(status: string) {\n    if (!this.githubId) return;\n    this.wsSend({\n      type: 'status',\n      value: status,\n      id: this.githubId,\n      roomid: this.roomId,\n    });\n  }\n\n  callRequest(target: string) {\n    if (!this.githubId) return;\n    this.callStatus = 'calling';\n    this.wsSend({\n      type: 'call_request',\n      from: this.githubId,\n      to: target,\n    });\n  }\n\n  callDeny() {\n    if (!this.githubId || !this.callTarget) return;\n    this.wsSend({\n      type: 'call_deny',\n      from: this.githubId,\n      to: this.callTarget,\n    });\n    this.callId = null;\n    this.callTarget = null;\n    this.callStatus = 'none';\n    this.callConn?.disconnect();\n    this.callConn = null;\n    this.partnerStream = null;\n  }\n\n  async callStart() {\n    if (!this.callId) return;\n    console.log('call id', this.callId);\n    this.callStatus = 'calling';\n    navigator.mediaDevices.getUserMedia({ audio: true })\n      .then((stream) => {\n        console.log('self stream', stream);\n        this.callConn = connect(this.callId as string, stream);\n        this.callConn.on('addstream', (e: RTCTrackEvent) => {\n          console.log('stream added', e);\n          [this.partnerStream] = e.streams;\n\n          this.audioElement = document.createElement('audio');\n          this.audioElement.style.position = 'fixed';\n          this.audioElement.style.bottom = '0';\n          this.audioElement.style.left = '0';\n\n          this.audioElement.controls = true;\n          this.audioElement.autoplay = true;\n          [this.audioElement.srcObject] = e.streams;\n          document.body.appendChild(this.audioElement);\n        });\n      });\n  }\n\n  callEnd() {\n    if (!this.githubId || !this.callTarget) return;\n    this.wsSend({\n      type: 'call_end',\n      from: this.githubId,\n      to: this.callTarget,\n    });\n    this.callId = null;\n    this.callTarget = null;\n    this.callStatus = 'none';\n    this.callConn?.disconnect();\n    this.callConn = null;\n    this.partnerStream = null;\n    if (this.audioElement) document.body.removeChild(this.audioElement);\n  }\n}\n\nexport const store = Vue.observable(new Store());\n"],"sourceRoot":""}]}