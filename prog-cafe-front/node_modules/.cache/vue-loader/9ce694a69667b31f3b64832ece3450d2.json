{"remainingRequest":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokada/M1/ProgCafe/prog-cafe-front/src/components/signIn/SignInButton.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/src/components/signIn/SignInButton.vue","mtime":1600820798363},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnOwppbXBvcnQgeyBhdXRoIH0gZnJvbSAnQC91dGlscy9maXJlYmFzZSc7CmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnQC91dGlscy9zdG9yZSc7CmltcG9ydCB7IHNpZ25pbiB9IGZyb20gJ0AvdXRpbHMvaHR0cCc7CgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpZ25JbkJ1dHRvbiBleHRlbmRzIFZ1ZSB7CiAgc2lnbkluKCkgewogICAgc3RvcmUubG9hZGluZyA9IHRydWU7CiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdpdGh1YkF1dGhQcm92aWRlcigpOwogICAgYXV0aC5zaWduSW5XaXRoUG9wdXAocHJvdmlkZXIpCiAgICAgIC50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBjb25zdCB1c2VybmFtZSA9IHJlc3VsdD8uYWRkaXRpb25hbFVzZXJJbmZvPy51c2VybmFtZTsKICAgICAgICBpZiAodXNlcm5hbWUgPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdVc2VybmFtZSBpcyBub3QgZGVmaW5lZCcpOwogICAgICAgIHN0b3JlLmdpdGh1YklkID0gdXNlcm5hbWU7IC8vIHVwZGF0ZSBzdG9yZS5naXRodWJJZAogICAgICAgIHJldHVybiBzaWduaW4odXNlcm5hbWUpOwogICAgICB9KQogICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgc3RvcmUuZW50ZXJSb29tKHJlcy5pZCwgcmVzLnVzZXJzKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdSb29tJywgcGFyYW1zOiB7IHJvb21JZDogcmVzLmlkIH0gfSk7IC8vIOODq+ODvOODoOOBuOmjm+OBs+OBvuOBme+8iOODq+ODvOODoElE44Gv6YGp5b2T77yJCiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pCiAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICBzdG9yZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogIH0KfQo="},{"version":3,"sources":["SignInButton.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignInButton.vue","sourceRoot":"src/components/signIn","sourcesContent":["<template>\n  <div class=\"signin\">\n    <button @click=\"signIn\">\n      <img src=\"https://github.githubassets.com/favicons/favicon-dark.png\" />\n      <span>Sign up with GitHub</span>\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator';\nimport firebase from 'firebase/app';\nimport { auth } from '@/utils/firebase';\nimport { store } from '@/utils/store';\nimport { signin } from '@/utils/http';\n\n@Component\nexport default class SignInButton extends Vue {\n  signIn() {\n    store.loading = true;\n    const provider = new firebase.auth.GithubAuthProvider();\n    auth.signInWithPopup(provider)\n      .then((result) => {\n        const username = result?.additionalUserInfo?.username;\n        if (username == null) throw new Error('Username is not defined');\n        store.githubId = username; // update store.githubId\n        return signin(username);\n      })\n      .then((res) => {\n        store.enterRoom(res.id, res.users);\n        this.$router.push({ name: 'Room', params: { roomId: res.id } }); // ルームへ飛びます（ルームIDは適当）\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        store.loading = false;\n      });\n  }\n}\n</script>\n\n<style scoped>\n.signin {\n  position: absolute;\n  top: 70%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\nbutton {\n  display: flex;\n  background-color: black;\n  color: white;\n  border-radius: 5px;\n  border: 0;\n  cursor: pointer;\n  padding: 0.5em 1.2em;\n  align-items: center;\n}\nbutton span {\n  margin-left: 1em;\n}\nbutton img {\n  height: 1.5em;\n}\n</style>\n"]}]}