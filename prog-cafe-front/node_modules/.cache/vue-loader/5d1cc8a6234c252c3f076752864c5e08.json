{"remainingRequest":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokada/M1/ProgCafe/prog-cafe-front/src/components/room/status/SelfStatus.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/src/components/room/status/SelfStatus.vue","mtime":1600820798358},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokada/M1/ProgCafe/prog-cafe-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnQC91dGlscy9zdG9yZSc7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IHplcm9QYWRkaW5nIH0gZnJvbSAnQC91dGlscy91dGlscyc7CgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGZTdGF0dXMgZXh0ZW5kcyBWdWUgewogIGxpbWl0VGltZSA9IDMwMDsKICBjb3VudCA9IHRoaXMubGltaXRUaW1lOwogIHRpbWVyITogbnVtYmVyOwogIGNsb2NrITogbnVtYmVyOwoKICBnZXQgd29ya2luZygpIHsKICAgIHJldHVybiBzdG9yZS5zdGF0dXMgPT09ICdXb3JraW5nJzsKICB9CgogIGdldCBnZXRBY3RpdmVUaW1lKCkgewogICAgY29uc3QgaG91ciA9IHplcm9QYWRkaW5nKE1hdGguZmxvb3Ioc3RvcmUuYWN0aXZlVGltZSAvIDM2MDApLCAyKTsKICAgIGNvbnN0IG1pbiA9IHplcm9QYWRkaW5nKE1hdGguZmxvb3IoKHN0b3JlLmFjdGl2ZVRpbWUgLSAoMzYwMCAqIE51bWJlcihob3VyKSkpIC8gNjApLCAyKTsKICAgIGNvbnN0IHNlY29uZCA9IHplcm9QYWRkaW5nKHN0b3JlLmFjdGl2ZVRpbWUgJSA2MCwgMik7CiAgICByZXR1cm4gYCR7aG91cn06JHttaW59OiR7c2Vjb25kfWA7CiAgfQoKICBnZXQgcmVtYWluaW5nVGltZSgpIHsKICAgIGNvbnN0IG1pbiA9IHplcm9QYWRkaW5nKE1hdGguZmxvb3IodGhpcy5jb3VudCAvIDYwKSwgMik7CiAgICBjb25zdCBzZWNvbmQgPSB6ZXJvUGFkZGluZyh0aGlzLmNvdW50ICUgNjAsIDIpOwogICAgcmV0dXJuIGAke21pbn06JHtzZWNvbmR9YDsKICB9CgogIHNldFN0YXR1cyhzdGF0dXM6IFN0YXR1cykgewogICAgY29uc3Qgb2xkU3RhdHVzID0gc3RvcmUuc3RhdHVzOyAvLyDjg5zjgr/jg7PjgpLmirzjgZXjgozjgovliY3jga7nirbmhYsKICAgIHN0b3JlLnN0YXR1cyA9IHN0YXR1czsKICAgIGlmIChvbGRTdGF0dXMgPT09IHN0b3JlLnN0YXR1cykgcmV0dXJuOwogICAgc3RvcmUuc2VuZFN0YXR1cyhzdGF0dXMpOwogICAgaWYgKHN0YXR1cyA9PT0gJ0JyZWFraW5nJykgewogICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMuY291bnQgLT0gMTsKICAgICAgICBpZiAodGhpcy5jb3VudCA8PSAwKSB0aGlzLnNldFN0YXR1cygnV29ya2luZycpOwogICAgICB9LCAxMDAwKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY291bnQgPSB0aGlzLmxpbWl0VGltZTsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIH0KICB9CgogIGNyZWF0ZWQoKSB7CiAgICBpZiAoc3RvcmUuc3RvcHBpbmcpIHsKICAgICAgc3RvcmUuc3RvcHBpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jbG9jayA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBpZiAoc3RvcmUuc3RhdHVzID09PSAnV29ya2luZycpIHsKICAgICAgICAgIHN0b3JlLmFjdGl2ZVRpbWUgKz0gMTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfQogIH0KCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jbG9jayk7CiAgICBzdG9yZS5zdG9wcGluZyA9IHRydWU7CiAgfQp9Cg=="},{"version":3,"sources":["SelfStatus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"SelfStatus.vue","sourceRoot":"src/components/room/status","sourcesContent":["<template>\n  <div class=\"self-status\">\n    <div class=\"status-change-buttons\">\n      <button\n        :class=\"{ active: working }\"\n        @click=\"setStatus('Working')\"\n      >\n        <img src=\"@/assets/working.png\" alt=\"working\">\n        <p v-if=\"working\">{{ getActiveTime }}</p>\n      </button>\n      <button\n        :class=\"{ active: !working }\"\n        @click=\"setStatus('Breaking')\"\n      >\n        <img src=\"@/assets/break.png\" alt=\"break\">\n        <p v-if=\"!working\">{{ remainingTime }}</p>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { store } from '@/utils/store';\nimport { Component, Vue } from 'vue-property-decorator';\nimport { zeroPadding } from '@/utils/utils';\n\n@Component\nexport default class SelfStatus extends Vue {\n  limitTime = 300;\n  count = this.limitTime;\n  timer!: number;\n  clock!: number;\n\n  get working() {\n    return store.status === 'Working';\n  }\n\n  get getActiveTime() {\n    const hour = zeroPadding(Math.floor(store.activeTime / 3600), 2);\n    const min = zeroPadding(Math.floor((store.activeTime - (3600 * Number(hour))) / 60), 2);\n    const second = zeroPadding(store.activeTime % 60, 2);\n    return `${hour}:${min}:${second}`;\n  }\n\n  get remainingTime() {\n    const min = zeroPadding(Math.floor(this.count / 60), 2);\n    const second = zeroPadding(this.count % 60, 2);\n    return `${min}:${second}`;\n  }\n\n  setStatus(status: Status) {\n    const oldStatus = store.status; // ボタンを押される前の状態\n    store.status = status;\n    if (oldStatus === store.status) return;\n    store.sendStatus(status);\n    if (status === 'Breaking') {\n      this.timer = setInterval(() => {\n        this.count -= 1;\n        if (this.count <= 0) this.setStatus('Working');\n      }, 1000);\n    } else {\n      this.count = this.limitTime;\n      clearInterval(this.timer);\n    }\n  }\n\n  created() {\n    if (store.stopping) {\n      store.stopping = false;\n      this.clock = setInterval(() => {\n        if (store.status === 'Working') {\n          store.activeTime += 1;\n        }\n      }, 1000);\n    }\n  }\n\n  beforeDestroy() {\n    clearInterval(this.clock);\n    store.stopping = true;\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.self-status {\n  padding: 1em;\n  padding-bottom: 0;\n\n  .status-change-buttons {\n    display: grid;\n    height: 100%;\n    width: 100%;\n    border: 6px solid var(--main);\n    border-radius: 10px;\n    background: var(--main);\n\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: minmax(0, 1fr);\n\n    button {\n      height: 100%;\n      border: 0;\n      outline: none;\n      background: var(--main);\n      padding: 1em;\n      cursor: pointer;\n\n      border-radius: 5px;\n\n      &.active {\n      background: var(--background);\n        cursor: default;\n      }\n\n      transition: all 0.2s;\n\n      img {\n        height: 90%;\n      }\n      p {\n        margin: 0;\n        font-family: Ubuntu, sans-serif;\n        color: var(--font);\n      }\n    }\n  }\n}\n</style>\n"]}]}